# 基本字符处理

C语言/语言/基本概念/基本字符处理

---

​		对于基本字符的处理，包括字符集的映射和



## ASCII

​		ASCII编码将计算机单字节存储的8位数据解译成单个字符的方式，其中 `0000 0000`首位不用做表达， 剩余七位的组合映射不同的字符。

> 在 Unicode 中， ASCII 字符块被称作 [`U+0000..U+007F` 基础拉丁（ Basic Latin ）](http://www.unicode.org/charts/PDF/U0000.pdf)

![image-20210719231706595](https://gitee.com/masstsing/picgo-picserver/raw/master/image-20210719231706595.png)

```c
#include <stdio.h>
 
int main(void)
{
    puts("Printable ASCII:");
    for (int i = 32; i < 127; ++i) {
        putchar(i);
        putchar(i % 16 == 15 ? '\n' : ' ');
    }
}
```



## 基础源字符集

源字符集是包含作为单字节子集的*基本源字符集*的多字节字符集，后者由以下 96 个字符组成：

-  5 个空白字符（空格、水平制表、垂直制表、换页、换行）

- 10 个数字字符，从 '0' 到 '9'

- 52 个字母，从 'A' 到 'Z' 以及从 'a' 到 'z'

- 29 个标点字符：`` _ { } [ ] # ( ) < > % : ; . ? * + - / ^ & | ~ ! = , \ " '``



## 转义序列

​		在字符串字面量和字符常量中，某些特殊的字符不是用于显示和表达信息，而是为了控制格式或做其他非显示性功能。这样的字符在进行符号化的书写时，通过`\`来说明转义，用于将该序列在编译时转义为特殊的控制字符。

​		![image-20210719232107973](https://gitee.com/masstsing/picgo-picserver/raw/master/image-20210719232107973.png)

> **八进制转义序列：**
>
> ​		八进制转义序列拥有三个八进制位的长度限制，但若提前遇到不是合法八进制位的字符，则在首个这种字符处终止。
>
> **十六进制转义序列：**
>
> ​		十六进制转义序列无长度限制，并在首个不是合法十六进制位的字符处终止。
>
> ​		若单个十六进制转义序列所表示的值和字符串字面量或字符常量中使用的字符类型（`` char``、`` char16_t``、`` char32_t (C11 起) ``或`` wchar_t`` ）不匹配，则结果未指定。
>
> > ​		窄字符串字面量或 16 位字符串字面量 (C11 起)中的通用字符名可能映射到多于一个编码单元，例如 \U0001f34c 在 UTF-8 中是 4 个 char 编码单元（ \xF0\x9F\x8D\x8C ），而在 UTF-16 中是 2 个 char16_t 编码单元（ （C99起）
> >
> >  \xD83C\xDF4C ） (C11 起)。
>
> **\0：**
>
> ​		数值转义序列中最为常用的是八进制转义序列中的`\0`， 它表示空终止字符串中的空终止符，附着在每个字符串字面量的尾部。
>
> **\n：**
>
> ​		换行符 `**\n**` 在用于文本模式 I/O时有特殊含义：它被转换为 OS 限定的换行表示，通常是字节或字节序列。某些系统替而用长度域标记其文本行。
>
> **\?：**
>
> ​		用于阻止在字符串字面量内转译三标符：如 ``"??/"`` 的字符串被编译成 ``"\" ``，但若如在` "?\?/" `中转义第二个问号，则它变为 ``"??/"`` 。



### 通用字符名的范围

​		若通用字符名对应不是 0x24 (`$`)、 0x40 (`@`) 或 0x60 (```) 的小于 0xA0 的码位，或代理码位（范围 0xD800-0xDFFF，含两端），则程序为谬构。换言之，基础源字符集的成员与控制字符（在范围 0x0-0x1F 与 0x7F-0x9F 中）不能以通用字符名表达。

​		对应大于 0x10FFFF 的码位的通用字符名（在 ISO/IEC 10646 中未定义）能用于字符常量与字符串字面量。 C++20 中不允许这种用法。



```c
#include <stdio.h>
 
int main(void)
{
    printf("This\nis\na\ntest\n\nShe said, \"How are you?\"\n");
}
```



## 替用运算符及记号

​		C 源代码可以用任何包含 [ISO 646:1983](https://en.wikipedia.org/wiki/ISO_646) 不变量字符集的 8 位字符集书写，即使是非 ASCII 字符集。但有几个 C 运算符和标点在 ISO 646 代码集外：`{, }, [, ], #, \, ^, |, ~`。

​		为能使用所有这些符号不存在于其中字符编码（例如德文 [DIN 66003](http://de.wikipedia.org/wiki/DIN_66003) ），有二种可能：

- 另一种使用这些字符集的运算符拼写，
- 二或三个 ISO 646 兼容字符的特殊组合，会像单个非 ISO 646 字符般转译它们。



### 运算符宏 （c95)

​		有使用非 ISO 646 字符的替用拼写，作为宏定义于 `<iso646.h>` ：

![image-20210719234112973](https://gitee.com/masstsing/picgo-picserver/raw/master/image-20210719234112973.png)

​		字符 & 及 ! 在 ISO-646 下不变，但仍然为这些运算符提供替用写法，以使用这些字符适应更加受限的历史字符集。

​		没有等于运算符的替用拼写 == ，因为字符 = 已在所有受支持字符集中存在。

### 替用记号-双标符 （C95)

​		替用记号是核心语言的一部分，而且在语言的所有方面，每个替用记号表现准确等同于其基本记号，除了其拼写（字符串化运算符`#/##`可令拼写可见）。

​		双字替用记号有时被称为“双标符”。

![image-20210719234320111](https://gitee.com/masstsing/picgo-picserver/raw/master/image-20210719234320111.png)

### 三标符

​		在翻译阶段1（注释前分析并在字符串字面量中得到辨认），每个三标符会被对应的基本字符取代。

​		![image-20210719234551632](https://gitee.com/masstsing/picgo-picserver/raw/master/image-20210719234551632.png)

> 因为三标符在早期处理，故如
>
> ```c
>  // Will the next line be executed?????/    ??/ -> \  字符串连接符
> this
> ```
>
> 的注释可以有效地注释掉下一行.且
>
> ```c
> "What's going on??!" 
>      的字符串字面量被分析成 
> "What's going on|" 
> ```



```c
%:include <stdlib.h>
%:include <stdio.h>
%:include <iso646.h>
 
int main(int argc, char** argv)
??<
    if (argc > 1 and argv<:1:> not_eq NULL)
    <%
       printf("Hello%s\n", argv<:1:>);
    %>
 
    return EXIT_SUCCESS;
??>
```





















