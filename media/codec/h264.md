# H264

---

​		



## 帧结构

- IDR（instantaneous Decoding Refresh），即时刷新帧

  ​		I帧和IDR帧都是使用帧内预测的，是同一个东西，在编码和解码中为了方便。首个I帧和其他I帧区别开，所以才把首个I帧叫IDR帧，方便控制编码和解码的流程。

  ​		![在这里插入图片描述](https://img-blog.csdnimg.cn/dd2f694073544d74931dd4b9839b324a.png)

![在这里插入图片描述](https://img-blog.csdnimg.cn/52b2b2e01e314ced9dd9dd5ccaf9f06b.png)



## NALU

- NALU start code

  ​	NALU的起始码以`00 00 01`或`00 00 00 01`开头

- NALU type

  ​	NALU书的数据类型由单一字节决定

  ![在这里插入图片描述](https://img-blog.csdnimg.cn/24108af7d6274f40a70c81715a52246d.png)

  ```c
  /*
  0 1   3			8
  -----------------
  |F|NRI|  Type	|
  -----------------
  
  - F， 屏蔽位，正常状态下应该为0，如果1应该舍弃
  - NRI， 标识当前NALU的重要性等级，值越大标识当前NALU越重要，如果取 00，标识可以丢弃
  - Type，数据类型
       0x67 (0 11 00111) SPS		非常重要     		type = 7
       0x68 (0 11 01000) PPS		非常重要     		type = 8
       0x65 (0 11 00101) IDR  	关键帧  非常重要	  type = 5
       0x61 (0 10 00001) I帧      	重要             	 type = 1
       0x41 (0 10 00001) P帧      	重要             	 type = 1
       0x01 (0 00 00001) B帧      	不重要           	type = 1
       0x06 (0 00 00110) SEI      不重要           	 type = 6
  */
  ```

- 分片NALU

  ​	`7C`开头是分片NALU，后面一般为`85/05/45`

  - `7C 85`，转化为65并加入包头
  - `7C 45`，直接去除
  - `7C 05`，直接去除