# GB28181

---

​		GB/T 28181全称为《安全防范视频监控联网系统信息传输、交换、控制技术要求》，是我国音视频领域的一项关键标准。 

​		标准规定了公共安全视频监控联网系统(以下简称联网系统) 的互联结构、通信协议结构， 传输、 交换、 控制的基本要求和安全性要求,，以及控制、 传输流程和协议接口等技术要求。

​		标准不仅包含了系统架构、设备接入、流媒体传输、信令交互、存储管理、安全防护和平台管理等方面的内容，还采用了基于SIP（Session Initiation Protocol）的网络视频传输协议，规范了视频监控设备之间的通信方式。这使得来自不同厂商的设备可以实现统一的通信协议，并在同一平台上实现集成和管理。



![img](https://raw.githubusercontent.com/Mocearan/picgo-server/main/b853a9a7eaa9af140e7740b36e6fc88e.png)

   

## 参考

[nvr(包含GB28181)推拉流测试:基于ubuntu:WVP+ZLMediaKit+MediaServerUI_wvp pro gb28181 模拟测试-CSDN博客](https://blog.csdn.net/m0_73191258/article/details/132478344)

[Linux平台下搭建GB28181服务器(WVP+ZLMediakit)_gb28181服务器搭建-CSDN博客](https://blog.csdn.net/yang1fei2/article/details/132223894?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromBaidu~PaidSort-1-132223894-blog-132478344.235^v43^pc_blog_bottom_relevance_base7&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromBaidu~PaidSort-1-132223894-blog-132478344.235^v43^pc_blog_bottom_relevance_base7&utm_relevant_index=1)

[wvp-GB28181-pro 编译部署ubuntu系统【详细教程】_wvp gb28181 pro-CSDN博客](https://blog.csdn.net/KIDfengKID/article/details/127894376?ops_request_misc=%7B%22request%5Fid%22%3A%22169235127916777224455138%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&request_id=169235127916777224455138&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2allsobaiduend~default-1-127894376-null-null.142v93insert_down1&utm_term=ubuntu 部署wvp&spm=1018.2226.3001.4187)

优秀项目学习：GB2818.Solution ， ZLMediaKit 等

[技术解码 | GB28181协议简介及实践 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/393863592)

[Hanbox 的个人主页 - 文章 - 掘金 (juejin.cn)](https://juejin.cn/user/2066737589667486/posts)

[GB/T 28181：到底是什么协议❓GB/T 28181 标准，简言之，是让所有监控设备能“共话”的统一语言规则，确保 - 掘金 (juejin.cn)](https://juejin.cn/post/7404775786712039478)

[安徽春耕科技的个人空间-安徽春耕科技个人主页-哔哩哔哩视频 (bilibili.com)](https://space.bilibili.com/241181578)

[智能安防系统开发_lcyw的博客-CSDN博客](https://machh.blog.csdn.net/category_9592385_2.html)

[GB28181学习（一）——总述_sip监控域-CSDN博客](https://blog.csdn.net/www_dong/article/details/132515446)

[GB28181_却道天凉_好个秋的博客-CSDN博客](https://blog.csdn.net/www_dong/category_12422526.html)



## 版本

- 2011年起，我国推出了GB/T 28181-2011版本
  - 为安防行业的前端设备、平台服务器、平台客户端等安防产品的建设部署提供了基础标准
-  2016年，GB/T 28181标准进行了升级，推出了GB/T 28181-2016版本
  - 进一步细化和完善了视频监控设备之间的通信协议规范
  - 使得不同厂商的设备能够更好地在同一平台上协同工作
- 2022年，推出了GB/T 28181-2022版本
  - 于2023年7月正式发布，同时废止了2016版本

[GB/T 28181-2011、2016、2022变更对比](https://blog.csdn.net/byxdaz/article/details/130462816)

## 概念

- 信令：用于控制和管理通信会话的一系列指令或消息
  - 信令在视频监控系统中用于建立、维护和终止视频、音频和其他数据的传输
  - `GB/T 28181`标准中的信令交互主要基于SIP进行扩展
    - SIP是一种用于建立、修改和终止多媒体会话（如视频通话、音频通话等）的通信协议
    - `GB/T 28181`中，设备间通过SIP信令建立通信会话和传输控制信息
    - 常用的SIP消息包括注册、设备搜索、设备状态查询、设备控制等

- 流媒：音视频流，在传输层面使用RTP
  - `GB/T 28181`协议中，RTP主要用于传输高清流畅的视频图像
  - RTP支持多种音视频编码格式，不同厂商、不同型号的视频监控设备能够集成到同一个系统
  - RTP协议还提供了时间戳和序列号机制，用于保持音视频数据的同步和连续性
    - 确保用户能够观看到连续、稳定的监控画面

- `SIP client`：符合 IETF   RFC   3261 规定的，具有注册登记、建立/终止会话连接、接收和播放视音频流等功能的实体
  - 主要包括用户界面、用户代理(UA) 、媒体解码模块和媒体通信模块。

- `sip`监控域：支持`gb28181`协议规定的设备组成的监控网络
  - 前端设备、用户终端、SIP服务器和网络等组成的监控系统
  - 每个SIP监控域就是一个基础的28181通信模型，包括：
    - 前端SIP设备：摄像机、NVR、下级平台等
    - 信令安全路由网关
    - 中心信令控制服务器
    - 流媒体服务器
    - 展示层面的SIP客户端

- 非`sip`监控域：不支持`gb28181`协议规定的监控网络，不支持本标准规定的通信协议的监控资源、用户终端、网络等构成的监控网络
  -  模拟接入设备
  - 不支持本标准规定的通信协议的数字接入设备
  - 模数混合型监控系统
  - 不支持本标准规定的SIP协议的数字型监控系统
- 中心信令控制服务器：具有向SIP客户端、SIP设备、媒体服务器和网关提供注册、路由选择以及逻辑控制功能，并且提供接口与应用服务器通信的服务器。
  - 逻辑实体包括代理服务器、注册服务器、重定向服务器、 背靠背用户代理等的一种或者几种
  - 是负责核心SIP信令应用处理的SIP服务器
- 媒体服务器：提供实时媒体流的转发服务,提供媒体的存储、历史媒体信息的检索和点播服务的服务器
  - 媒体服务器接收 来自SIP设备、网关或其他媒体服务器等设备的媒体数据
  - 并根据指令,将这些数据转发到其他单个或 者多个SIP客户端和媒体服务器
- 信令安全路由网关：具有接收或转发域内外 SIP 信令功能，实现 SIP 域间路由信息传递以及路由信令、信令身份标识的添加和鉴别等功能的实体
- 注册服务器：SIP逻辑实体，是具有接收注册请求、将请求中携带的信息进行保存并提供本域内位置服务的功能服务器
- 重定向服务器：SIP逻辑实体，负责规划SIP呼叫路由
  - 它将获得的呼叫下一跳地址信息告诉呼叫方
  - 请求方根据此地址直接向下一跳发出请求，此后重定向服务器退出呼叫过程
  - 2022版本中新增
- 用户代理：SIP逻辑终端实体
  - 由用户代理客户端(UAC)和用户代理服务器(UAS)组成
  - UAC负责发起呼叫，UAS负责接收呼叫并作出响应
- 代理服务器：SIP逻辑实体
  - 通过它把来自用户代理客户端(UAC)的请求转发到用户代理服务端(UAS)并把UAS的响应消息转发回 UAC
  - 一个请求消息有可能通过若干个代理服务器来传送
    - 每一个代理服务器独立地确定路由
    - 响应消息 沿着请求消息相反的方向传递
- 背靠背用户代理：SIP逻辑实体
  - 作为用户代理服务端(UAS)接收请求消息并处理该消息
  - 同时作为用户代理客户端(UAC)来发送请求消息





## 网络结构

![sip监控域是什么 监控区域什么意思_字段](https://s2.51cto.com/images/blog/202403/20192523_65fac7a3d539b63210.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=/format,webp/resize,m_fixed,w_1184)



### 平级互联

​		信令安全路由网关之间是平级关系。

- 共享对方SIP监控域的监控资源
  - 由信令安全路由网关 向 目的信令安全路由网关发起
  - 目的信令安全路由网关鉴权认证
  - 进行平级系统间通信

![sip监控域是什么 监控区域什么意思_sip监控域是什么_02](https://s2.51cto.com/images/blog/202403/20192524_65fac7a4030cd35511.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=/format,webp/resize,m_fixed,w_1184)

![sip监控域是什么 监控区域什么意思_sip监控域是什么_03](https://s2.51cto.com/images/blog/202403/20192524_65fac7a41e45985023.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=/format,webp/resize,m_fixed,w_1184)

### 上下级联

​		信令安全路由网关之间是上下级关系。

- 下级信令安全路由网关主动向上级信令安全路由网关 发起注册
- 经上级信令安全路由网关鉴权认证后才能进行上下级系统间通信

![sip监控域是什么 监控区域什么意思_sip监控域是什么_04](https://s2.51cto.com/images/blog/202403/20192524_65fac7a43b24063250.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=/format,webp/resize,m_fixed,w_1184)

![sip监控域是什么 监控区域什么意思_sip监控域是什么_04](https://s2.51cto.com/images/blog/202403/20192524_65fac7a43b24063250.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=/format,webp/resize,m_fixed,w_1184)



### 域和非域互联

​		通过融合网关在多个层次上对协议和媒体数据进行转换，分为控制协议网关和媒体网关。

![sip监控域是什么 监控区域什么意思_字段_05](https://s2.51cto.com/images/blog/202403/20192524_65fac7a451dea63486.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=/format,webp/resize,m_fixed,w_1184)

- 控制协议网关：网络传输协议、控制协议、设备地址的转换
  -  代理非SIP监控域设备在SIP监控域的SIP服务器上进行注册
  - 将非SIP监控域的网络传输协议与GB28181中规定的网络传输协议（IP，TCP和UDP）进行双向协议转换
  - 非SIP监控域的设备控制协议与GB28181中规定的会话初始协议（SIP【注册，预览，回放】）、会话描述协议（SDP）、控制描述协议（MANSCDP，采用SIP Message消息体携带，负责设备控制、报警控制等命令）和媒体回放控制协议（MANSRTSP，采用SIP Info消息体携带，负责回放控制命令）进行双向协议转换
  - 非SIP监控域的设备地址与GB28181中规定的设备地址（SIP用户ID、URL编码规则）进行双向地址转换

- 媒体网关：媒体传输协议、媒体数据编码格式的转换
  -  将非SIP监控域的媒体传输协议和数据封装格式与GB28181规定的媒体传输协议（RTP/RTCP）和数据封装格式（PS） 进行双向协议转换
  - 将非SIP监控域的媒体数据与GB28181中规定的媒体数据压缩编码（视频H.264、 MPEG-4，音频G.711、G.723.1、G.729、SVAC）进行双向转码



## 协议结构

![img](https://pics6.baidu.com/feed/b21c8701a18b87d66f7b9d2837fcb2321e30fdce.jpeg@f_auto?token=ce3151a0db5870a9899594abd1d4e67e)

​		连网系统视频监控在进行视频、音频传输及控制时，应建立两个传输通道：会话通道和媒体流通道。会话通道用于在设备之间建立会话，并传输系统控制命令；媒体流通道用于传输视频、音频数据，经过压缩编码的视频、音频流（采用流媒体协议RTP/RTCP传输）。

（2）会话初始协议。安全注册、实时媒体点播、历史媒体回放等应用的会话控制采用SIP规定的注册、发起等请求和响应方法实现，历史媒体回放控制采用S1P扩展协议RFC2976规定的INFO方法实现，前端设备控制、信息查询、报警事件通知和转发等应用的会话控制采用SIP扩展协议RFC3428规定的消息方法实现。SIP消息应支持基于UDP和TCP的传输。

（3）会话描述协议。连网系统有关设备之间会话建立过程的会话协商和媒体协商应采用SDP协议描述，主要内容包括会话描述、媒体信息描述、时间信息描述。会话协商和媒体协商信息应采用S1P消息的消息体携带传输。

（4）控制描述协议。连网系统有关前端设备控制、报警信息、设备目录信息等控制命令，应采用监控报警连网系统控制描述协议（MANSCDP）描述。连网系统控制命令，应采用SIP消息的消息体携带传输。

（5）媒体回放控制协议。历史媒体的回放控制命令，应修改采用MANSRTSP协议描述，实现设备端到端之间对视/音频流的正常播放、快速、暂停、停止、随机拖动播放等远程控制。历史媒体的回放控制命令，采用S1P消息INFO的消息体携带传输。

（6）媒体传输与媒体编/解码协议。媒体流在连网系统IP网络上传输时，应支持基于UDP的RTP传输，RTP的负载应采用基于PS封装的视/音频数据或视/音频基本流数据。媒体流的传输应采用RTP协议，提供实时数据传输中的时间戳信息及各数据流的同步，并且应采用RTCP协议，为按序传输数据包提供可靠保证，提供流量控制和拥塞控制。



## GB/T 28181-2016 编码

​		国标ID（国标编号或国标设备ID），是指按照`GB/T 28181`协议中定义的ID编码规则，为设备分配的唯一标识符。用于在公共安全视频监控联网系统中标识和区分不同的设备。

​		对每个设备来说，除了设备ID，还有通道ID（包括视频通道ID，音频通道ID，报警通道ID等）。理论上在整个国标系统中，全部ID都必须保持唯一。不能出现不同设备下的通道ID相同的情况。

​		国标ID共20位，由多个部分组成：

### 中心编码

​		`8`位，设备所属监控中心的身份识别标识。

​		中心编码严格依照 GB/T 2260-2007 所规定的行政区划代码来予以确定，充分保障了编码所具备的地域性显著特征。当设备不属于基层单位时，空余位以 0 进行填充，进一步精细化了编码的层次结构体系。

![img](https://pics7.baidu.com/feed/a1ec08fa513d26978c078cc478a0cdf54216d839.jpeg@f_auto?token=53e5af3663385316bc41304afdd72ac0)

### 行业编码

​		`2`位，区分不同行业领域的设备或者系统。

​		借助特定的编码数值，达成了行业之间的有效区分辨别。

![img](https://pics0.baidu.com/feed/5882b2b7d0a20cf4ffd03d5e58523438adaf995d.jpeg@f_auto?token=647a51d05f9c151681686e7faa15a184)

![img](https://pics4.baidu.com/feed/50da81cb39dbb6fda20fee6f277fd416962b3788.jpeg@f_auto?token=6978661485b4c2d3a47bea89aae7a7ea)



### 类型编码

​		`3`位，设备或者系统的具体类型。

​		类型编码能够反映出设备的种类类别，便于在系统内部进行快速准确的识别以及分类管理操作。

> ​		如中心服务器、DVR（数字视频录像机）、NVR（网络视频录像机）以及摄像机等，都拥有专属的类型编码。

![img](https://pics6.baidu.com/feed/6a63f6246b600c33d12dad8934172e01d8f9a180.jpeg@f_auto?token=175281ba73dbbe2b1832ba37cf88371d)

![img](https://pics0.baidu.com/feed/b64543a98226cffc664551d5975a359ef703ead0.jpeg@f_auto?token=c4cf831ff368e9e2ea312bfa90232e46)



### 网络标识

​		`1`位，用于标识设备接入的网络类型，如公网、专网等。

![img](https://pics3.baidu.com/feed/91529822720e0cf383cb3b39271d8d11bf09aa99.jpeg@f_auto?token=3ff9c2f0eef69e50ddf6e64c4b25103c)

### 序号

​		`7`位，同一中心、行业和类型之下，设备或者系统的唯一身份标识。

​		序号确保了每个设备或者系统都具备独一无二的身份特质。通过序号的合理编排，能够清晰明了地知晓设备在系统当中的位置分布以及排列顺序，为设备的维护保养与管理运作提供了极大的便捷性。

![img](https://pics3.baidu.com/feed/91529822720e0cf383cb3b39271d8d11bf09aa99.jpeg@f_auto?token=3ff9c2f0eef69e50ddf6e64c4b25103c)



### 实例

​		摄像机的 20 位编码为：11000000011320000001

- **中心编码：**11000000（北京市行政区划代码，后两位为 0 表明非基层单位）
- **行业编码：**01（公安系统）
- **类型编码：**132（摄像机）
- **序号：**0000001（假设为该公安系统中的第一台摄像机）





## 流程

### 注册

- 每个设备和平台都有一个国标ID
- 设备（或者下级平台）在自己的配置页面配置上级平台的IP、端口、国标ID等信息
- 上级平台在自己的配置页面添加2中设备（或者下级平台）的国标ID等信息
- 设备（或者下级平台）向上级平台发送注册信息，携带上级平台和自己的国标ID等信息
- 上级平台收到注册信息后
  - 首先校验其中的上级平台国标ID是否正确，如果不正确，则拒绝接入
  - 校验其中的设备（或者下级平台）国标ID，是否已经在平台中添加
    - 如果已经添加，则允许接入
    - 如果没有添加过，则拒绝连接
- 注销流程也一致，请求中的Expires为0表示注销



#### 设备身份认证

- 低安全级别：数字摘要认证
- 高安全级别：数字证书认证

​		高安全级别下：

- 网络层宜采用IPSec或传输层宜采用TLS对SIP消息实现逐跳安全加密（逐跳安全加密【链路加密】是指在离开一个节点【网络中的中继节点】进入信道时加密，在离开信道通过节点时解密，因此数据在信道中呈现密文形式，在节点中呈现明文形式）
- 宜在应用层采用S/MIME机制的端到端加密（在源端进行加密，在传输过程中不解密，一直到达目的端才进行解密因此对于中继节点来说，用户数据是不可知的密文）
- 会话密钥宜采用RSA算法加密，传输内容宜采用DES、3DES、AES128算法加密
- 数据存储宜采用3DES、AES(128位)、SM1等算法进行加密

#### 摘要认证

![sip监控域是什么 监控区域什么意思_字段_06](https://s2.51cto.com/images/blog/202403/20192524_65fac7a47e6d996244.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=/format,webp/resize,m_fixed,w_1184)



#### 数字整数认证

![sip监控域是什么 监控区域什么意思_字段_07](https://s2.51cto.com/images/blog/202403/20192524_65fac7a4901f674536.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=/format,webp/resize,m_fixed,w_1184)





#### 基本注册流程

- 1:`SIP  `代理向 `SIP  `服务器发送 `REGISTER  `请求

  - 消息头域中携带 `SIPUA `安全能力

  - 增加 `Authorization`头字段

    - `Authorization`的值为 `Capability`
    - 参数`algorithm `的值分为三部分
      - 第一部分为非对称算法描述，取值为 RSA
      - 第 二 部分为摘要算法描述，取值为 MD5/SHA-1/SHA-256中的一个或者多个
      - 第三部分为对称算法的描述，取值为 DES/3DES/ SM1中的一个或者多个

  - ```http
    Via: SIP/2.0/UDP 源域名或IP地址端口
    From: <sip: SIP设备编码@源域名>;tag=185326220
    To: <sip: SIP设备编码@源域名>
    Call-ID: ms1214-322164710-681262131542511620107-0@172.18.16.3
    CSeq: 1 Register
    Contact: <sip: SIP设备编码@源IP地址端口>
    Authorization: Capability algorithm = "A: RSA/ECB/PKCS1, RSA/CBC/PKCS1; H: SHA1, MD5, SHA256; S: DES/ECB/PKCS5, DES/CBC/PKCS5, 3DES/ECB/PKCS5, 3DES/CBC/PKCS5, SCB2"
    Max-Forwards: 70
    Expires: 3600
    Content-Length: 0
    ```

- 2:`SIP  `服务器向 `SIP UA`发送响应`401`

  - 在响应的消息头 `WWW-Authenticate`字段中给出适合 `SIP `代理的认证模式和参数

  - `WWW-Authenticate`取值为 `Asymmetric`

  - 参数`nonce`分为a和b两部分

  - `algorithm `的值取`SIPUA `安全能力中的 算法

  - ```http
    To: sip: SIP设备编码@源域名
    Content-Length: 0
    CSeq: 1 Register
    Call-ID: ms1214-322164710-681262131542511620107-0@172.18.16.3
    From: <sip: SIP 设备编码@源域名>;tag=185326220
    Via: SIP/2.0/UDP 源域名或IP 地址端口
    WWW-Authenticate: Asymmetric nonce="EUiG7xqPhJwSyD71BgMGCUtzp2 AObEdeRVn0cao0JaWPC8VcVBrrHif4+n0mXsHBXFnDGJ43DYWPnPx9XjwEHfl6iN+5SFu0JMa/cQ/VV8Quf8GE3hK7m5c6rGN+Mi61blTwhkI40+vI7ifFnRXbZM5iKynPz7XA1gr91Wd/7hY=&CXUUHOL6RctO..." algorithm="A:RSA/ECB/PKCS1&SHA1"
    ```

- 3:`SIP UA `重新向 SIP 服务器发送 `REGISTER  `请求，在请求的 `Authorization`字段给出认证信息

  - `SIPUA `收到`401`响应后，得到`nonce`中的`a`和`b`两部分

    - a为SIP服务做的摘要，b为SIPUA的公钥加密的报文

  - 首先用`SIPUA `私钥解密`b`，得到结果`c`

  - 对结果`c`用`401`响应中`algorithm `指定的算法做摘要，得到结果`d`

  - 用`sip`服务器公钥解密`a`，得到结果`d`

  - 结果`d`进行匹配，如果相匹配则信任该结果，否则丢弃

  - `SIPUA `重新向 `SIP`服务器发送 `Register`请求

    - `Authorization`取值为 `Asymmetric`

    - 参数`nonce`的值与上面`2:`中的相同

    - `response`的值为用本消息中`algorithm `指明的算法对`[c+nonce]`做摘要的结果

    - ```http
      Via: SIP/2.0/UDP 源域名或IP地址端口
      From: <sip: SIP设备编码@源域名>;tag=185326220
      To: <sip: SIP设备编码@源域名>
      Call-ID: ms1214-322164710-681262131542511620107-0@172.18.16.3
      CSeq: 2 Register
      Contact: <sip: SIP设备编码@源IP地址端口>
      Authorization: Asymmetric nonce="....", response="....", algorithm=SHA1
      Max-Forwards: 70
      Expires: 3600
      Content-Length: 0
      ```

- 4:`SIP  `服务器对请求进行验证，如果检查出 `SIP UA`身份合法，向 `SIP  UA`发送成功响`200`，如果身份不合法则发送拒绝服务应答

  - ```http
    To: <sip: SIP设备编码@源域名>;tag=69113a2a
    Contact: sip: SIP设备编码@源IP地址端口
    Content-Length: 0
    CSeq: 2 Register
    Call-ID: ms1214-322164710-681262131542511620107-0@172.18.16.3
    From: <sip: SIP设备编码@源域名>;tag=185326220
    Via: SIP/2.0/UDP源域名或IP 地址端口
    Date: 2010-11-02T15:01:26.115
    Expires: 3600
    ```




#### SIP信令认证

​		保证信令来源安全。

​		注册成功后，信令交互时采用数字摘要方式，对除 `Register`消息以外的每一条消息都做数字摘要。

- 启用了 Date字段信令消息的头域
  -  Date比对有效时间范围可设,初设值为10min,应在校时精度范围内
  - Date精确到秒
- 在头域中增加 Note字段
  - 值为 Digest，有两个参数 nonce、algorithm
  - Note=(Digest nonce="",algorithm =)
    - nonce的值为algorithm[From+to+CallID+Date+seed+消息体]数字摘要经过BASE64编码后 的值
    - algorithm 的值为数字摘要的算法名称,“+”为字符串连接运算
- 当跨域访问时
  - 若该信令是由本域的用户发起
    - 信令安全路由网关宜将发送到外域的信令添加` Monitor-User-Identity`头域
    - 其取值为信令安全路由网关ID 和用户的身份信息
  - 若该信令不是由本域 的用户发起
    - 只在原有` Monitor-User-Identity`域值前添加信令安全路由网关ID
    - 各段分隔符为`-`
  -  用户的身份为用户ID以及用户身份属性信息

![sip监控域是什么 监控区域什么意思_服务器_12](https://s2.51cto.com/images/blog/202403/20192525_65fac7a52cea526772.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=/format,webp/resize,m_fixed,w_1184)



### 实时预览

#### 客户端发起

​		`SIP`服务器采用`B2BUA`方式建立媒体服务器与接收者，媒体服务器与发送者之间的媒体流信令过程

![img](https://i0.hdslb.com/bfs/new_dyn/b91517e74036834f0538130c93bc8602407536888.png@1256w_1462h_!web-article-pic.webp)

> - 信令1、8、9、10、11、12为 `SIP`服务器接收到客户端的呼叫请求后，通过 `B2BUA  `方式建立 媒体流接收者与媒体服务器之间的媒体流信令过程
> - 信令2～7为 `SIP`服务器通过三方呼叫控制，建立媒体服务器与媒体流发送者之间的媒体流信令过程
> - 信令13～16 为媒体流接收者断开与媒体服务器之间的媒体流信令过程
> - 信令17～20 为 SIP  服务器断开媒体服务器与媒体流发送者之间的媒体流信令过程

​		命令流程描述如下：

- 1: 媒体流接收者向SIP服务器发送 `Invite  `消息
  - 消息头域中携带 `Subject  `字段，包含点播媒体源的参数
    - 视频源 ID
    - 发送方媒体流序列号
    - 媒体流接收者 ID
    - 接收端媒体流序列号标识
  - `SDP `消息体中 `s` 字段为`Play`代表实时点播

​		 `SIP`服务器通过三方呼叫控制，建立媒体服务器与媒体流发送者之间的媒体流信令过程

- 2:SIP服务器收到 `Invite  `请求，通过三方呼叫控制建立媒体服务器和媒体流发送者之间的媒体连接
  - 向媒体服务器发送 `Invite`  消息，此消息不携带 `SDP `消息体
- 3:媒体服务器以`200 OK  `响应`SIP `服务器的 `Invite  `请求
  - 携带 `SDP  `消息体，描述媒体服务器接收媒体流的IP、端口、媒体格式等
- 4:`SIP  `服务器向媒体流发送者发送 `Invite  `请求
  - 携带 消息`3 `中`200 OK `响应消息体
  - `s `字段为Play`”代表实时点播
  - 增加`y`字段描述 `SSRC `值 ，`f` 字段描述媒体参数
- 5:媒体流发送者以`200 OK  `响应SIP 服务器的 `Invite `请求
  - 携带 `SDP `消息体，描述了媒体流发送者发送媒体流的 IP、端口、媒体格式、SSRC 字段等内容
- 6:`SIP  `服务器向媒体服务器发送 `ACK `请求
  - 携带消息`5`中`200 OK  `响应消息体，完成与媒体服务器的 Invite  会话建立过程
- 7:`SIP` 服务器向媒体流发送者发送` ACK  `请求
  - 不携带消息体，完成`SIP`服务器与媒体流发送者的 `Invite `会话建立过程
  - 媒体流发送者向媒体服务器发送实时媒体流

​		完成三方呼叫控制后，`SIP  `服务器通过`B2BUA  `代理方式建立媒体流接收者和媒体服务器之间的媒体连接。

-  8: `SIP`服务器向媒体服务器发送`Invate`请求
  - 携带消息1中`SDP`
  - 增加 `SSRC `值，转发给媒体服务器
- 9:媒体服务器回复`200 OK` 响应
  - 携带 SDP 消息体，消息体中描述了媒体服务器发送媒体流的 IP、端口、媒体格式、SSRC  值等内容。
- 10:`SIP`服务器将消息`9`转发给媒体流接收者
-  11:媒体流接收者发送`ACK `消息，完成与 `SIP  `服务器的 `Invite  `会话建立过程
- 12:`SIP `服务器将消息`11`转发给媒体服务器，完成与媒体服务器的 `Invite  `会话建立过程

​		媒体服务器向媒体接收者发送实时媒体流。

​		媒体接收者断开媒体流。

- 13: 媒体流接收者向 `SIP  `服务器发送 `BYE `消息
  - 断开消息1、10、11建立的同媒体流接收者的`Invite  `会话
- 14:`SIP `服务器收到 `BYE `消息后回复`200 OK  `响应，会话断开
-  15:`SIP  `服务器收到 `BYE  `消息后向媒体服务器发送 `BYE  `消息
  - 断开消息8、9、12 建立的同媒体服务器的 `Invite  `会话
- 16:媒体服务器收到 `BYE  `消息后回复`200 OK` 响应，会话断开
- 17:`SIP   `服务器向媒体服务器发送 `BYE  `消息
  - 断开消息2、3、6建立的同媒体服务器的 `Invite`会话
- 18:媒体服务器收到 `BYE `消息后回复`200 OK `响应，会话断开
- 19:`SIP   `服务器向媒体流发送者发送` BYE ` 消息
  - 断开消息4、5、7建立的同媒体流发送者的`Invite  `会话
- 20:媒体流发送者收到 `BYE  `消息后回复`200 OK  `响应，会话断开



#### 第三方呼叫

![sip监控域是什么 监控区域什么意思_服务器_14](https://s2.51cto.com/images/blog/202403/20192525_65fac7a59bc8c39386.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=/format,webp/resize,m_fixed,w_1184)

​		命令流程描述如下:

- 1:`SIP`服务器向媒体服务器发送`Invite`消息
  - 此消息不携带`SDP`消息体
- 2:媒体服务器收到`SIP`服务器的`Invite`请求后，回复`200OK` 响应
  - 携带`SDP`消息体，消息体中描述了媒体服务器接收媒体流的IP、端口、媒体格式等内容
- 3:SIP服务器收到媒体服务器返回的`200OK` 响应后,向媒体流发送者发送Invite请求,请求中携带消息2中媒体服务器回复的200OK 响应消息体,s字段为“Play”代表实时点播,增加y 字段描述SSRC值,f字段描述媒体参数
- 4:媒体流发送者收到SIP服务器的Invite请求后,回复200OK 响应,携带SDP消息体,消息 体中描述了媒体流发送者发送媒体流的IP、端口、媒体格式、SSRC字段等内容
-  5:SIP服务器收到媒体流发送者返回的200OK 响应后,向媒体服务器发送 ACK 请求,请求 中携带消息4中媒体流发送者回复的200OK 响应消息体,完成与媒体服务器的Invite会话 建立过程
- 6:SIP服务器收到媒体流发送者返回的200OK 响应后,向媒体流发送者发送 ACK 请求,请 求中不携带消息体,完成与媒体流发送者的Invite会话建立过程
- 7:SIP服务器向媒体流接收者发送Invite消息,此消息不携带SDP消息体
- 8:媒体流接收者收到SIP服务器的Invite请求后,回复200OK 响应,携带SDP消息体,消息 体中描述了媒体流接收者接收媒体流的IP、端口、媒体格式等内容
- 9:SIP服务器收到媒体流接收者返回的200OK 响应后,向媒体服务器发送Invite请求,请求 中携带消息8中媒体流接收者回复的200OK 响应消息体,s字段为“Play”代表实时点播,增 加y字段描述SSRC值
- 10:媒体服务器收到SIP服务器的Invite请求后,回复200OK 响应,携带SDP消息体,消息体 中描述了媒体服务器发送媒体流的IP、端口、媒体格式、SSRC字段等内容
- 11:SIP服务器收到媒体服务器返回的200OK 响应后,向媒体流接收者发送 ACK 请求,请求 中携带消息10中媒体服务器回复的200OK 响应消息体,完成与媒体流接收者的Invite会话 建立过程
- 12:SIP服务器收到媒体服务器返回的200OK 响应后,向媒体服务器发送 ACK 请求,请求中 不携带消息体,完成与媒体服务器的Invite会话建立过程
- 13:SIP服务器向媒体流接收者发送 BYE 消息,断开消息7、8、11建立的同媒体流接收者的 Invite会话
- 14:媒体流接收者收到 BYE消息后回复200OK 响应,会话断开
- 15:SIP服务器向媒体服务器发送 BYE 消息,断开消息9、10、12建立的同媒体服务器的Invite 会话
- 16:媒体服务器收到 BYE消息后回复200OK 响应,会话断开
- 17:SIP服务器向媒体服务器发送 BYE 消息,断开消息1、2、5建立的同媒体服务器的Invite 会话
-  18:媒体服务器收到 BYE消息后回复200OK 响应,会话断开
- 19:SIP 服务器向媒体流发送者发送 BYE 消息,断开消息3、4、6建立的同媒体流发送者的 Invite会话
- 20:媒体流发送者收到 BYE消息后回复200OK 响应,会话断开

注：invite不携带SDP时，响应的SDP数据包含的ip和端口为接收媒体流的端口。



### 设备控制



#### 无应答

![img](https://i0.hdslb.com/bfs/new_dyn/b3dd3c7f06c9000d8f6dfb0c85bcb11a407536888.png@1256w_632h_!web-article-pic.webp)

​		`GB28181`的设备控制应满足以下基本要求:

- 源设备向目标设备发送控制命令

  > 控制命令的类型包括:
  >
  > ​		 摄像机云台控制、远程启动、录像控制报警布防/撤防、报警复位、强制关键顿、拉框放大、拉框缩小、看守位控制、PTZ 精准控制、存储卡格式化、目标跟踪、软件升级、设备配置等

- 设备配置的内容包括基本参数、视频参数范围、SVAC 编码、SVAC 解码视频参数属性、录像计划、报警录像、视频画面遮挡、画面翻转、报警上报开关、前端 OSD、图像抓拍配置

- 控制应采用 `IETF RFC3428` 中的 `MESSAGE `方法实现;

- 源设备向目标设备发送摄像机云台控制、远程启动、强制关键帧、拉框放大、拉框缩小、PTZ 精准控制、存储卡格式化、目标跟踪命令后,目标设备不发送应答命令

- 源设备向目标设备发送录像控制、报警布防/撤防、报警复位、看守位控制、软件升级、设备配置命令后

  - 目标设备应发送应答命令表示执行的结果

- 源设备包括 SIP 客户端网关或者联网系统，目标设备包括 SIP 设备网关或者联网系统。

​		控制命令流程描述如下：

- 1:源设备向`SIP  `服务器发送设备控制命令
  - 设备控制命令采用 `MESSAGE  `方法携带
- 2:SIP服务器收到命令后返回`200 OK`
- 3:SIP服务器向目标设备发送设备控制命令
  - 设备控制命令采用` MESSAGE  `方法携带
- 4:目标设备收到命令后返回`200 OK`



#### 有应答

![sip监控域是什么 监控区域什么意思_信令_16](https://s2.51cto.com/images/blog/202403/20192525_65fac7a5e3e1675497.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=/format,webp/resize,m_fixed,w_1184)

​		请求和响应是通过XML报文中的SN序号进行标识的

### 录像回放

​		视音频文件下载满足以下基本要求：

- SIP服务器接收到媒体接收者发送的文件下载请求后，向媒体流发送者发送媒体文件下载命令
  - 采用RTP传输，媒体流直接保存为媒体文件
  - 媒体回放控制命令引用 MANSRTSP协议中的 Play、Pause、Teardown的请求消息和应答消息
  - 媒体流接收者可以是用户客户端或联网系统，媒体流发送者可以是媒体设备或联网系统
- 媒体流接收者或 SIP服务器可通过配置查询等方式获取媒体流发送者支持的下载发送倍速，并在请求的 SDP 消息体中携带指定下载倍速。
  - 媒体流发送者可在 `Invite `请求对应的`200 OK `响应` SDP  `消息体中，扩展携带下载文件的大小参数以便于媒体流接收者计算下载进度，当媒体流发送者不能提供文件大小参数时
  - 媒体流接收者应支持根据码流中取得的时间计算下载进度
- 视音频文件下载采用媒体流保活机制



![img](https://i0.hdslb.com/bfs/new_dyn/acdbcd53137d438889f057dff4fde261407536888.png@1256w_1648h_!web-article-pic.webp)

> - 信令1、8、9、10、11、12为 SIP 服务器接收到客户端的呼叫请求后通过B2BUA  代理方式建立 媒体流接受者与媒体服务器之间的媒体链接信令过程
> - 信令2～7为 SIP  服务器通过三方呼叫控制建立 媒体服务器与媒体流之间的媒体链接信令过程
> - 信令13～16 为媒体流发送者回放、下载到文件结束向 媒体接收者发送下载完成的通知消息过程
> - 信令17～20为断开媒体流接收者断开与媒体服务器之间的 媒体链接信令过程
> - 信令21～24 为 SIP  服务器断开媒体服务器与媒体流发送者之间的媒体链接信令过程 



​		命令流程描述如下：

- 1:媒体流接收者向SIP  服务器发送 Invite  消息，消息头域中携带 Subject  字段，表明点播的视 频源 ID、发送方媒体流序列号、媒体流接收者 ID、接收端媒体流序列号标识等参数，SDP  消息 体中s 字段为“Download”  代表文件下载，u 字段代表下载通道 ID 和下载类型，t 字段代表下载 时间段，可扩展a 字段携带下载倍速参数，规定此次下载设备发流倍速，若不携带则默认为1倍速
- 2:SIP  服务器收到 Invite  请求后，通过三方呼叫控制建立媒体服务器和媒体流发送者之间的媒体连接。向媒体服务器发送 Invite  消息，此消息不携带 SDP  消息体
- 3:媒体服务器收到 SIP  服务器的 Invite  请求后，回复200 OK  响应，携带 SDP 消息体，消息体中描述了媒体服务器接收媒体流的IP、端口、媒体格式等内容
- 4:SIP  服务器收到媒体服务器返回的200 OK  响应后，向媒体流发送者发送 Invite  请求，请求 中携带消息3中媒体服务器回复的200 OK 响应消息体，s 字段为“Download” 代表文件下 载，u 字段代表下载通道 ID 和下载类型，t 字段代表下载时间段，增加 y 字段描述 SSRC  值 ，f字段描述媒体参数，可扩展a 字段携带下载倍速，将倍速参数传递给设备
- 5:媒体流发送者收到 SIP  服务器的 Invite  请求后，回复200 OK  响应，携带 SDP  消息体，消息 体中描述了媒体流发送者发送媒体流的 IP、端口、媒体格式、SSRC 字段等内容，可扩展 a 字段携带文件大小参数
- 6:SIP  服务器收到媒体流发送者返回的200 OK  响应后，向媒体服务器发送 ACK  请求，请求 中携带消息5中媒体流发送者回复的200 OK  响应消息体，完成与媒体服务器的 Invite  会话建立过程
-  7:SIP  服务器收到媒体流发送者返回的200 OK  响应后，向媒体流发送者发送 ACK  请求，请求中不携带消息体，完成与媒体流发送者的 Invite  会话建立过程
-  8:完成三方呼叫控制后，SIP  服务器通过 B2BUA  代理方式建立媒体流接收者和媒体服务器之间的媒体连接。在消息1中增加 SSRC 值，转发给媒体服务器
- 9:媒体服务器收到 Invite  请求，回复200 OK  响应，携带 SDP  消息体，消息体中描述了媒体服务器发送媒体流的 IP、端口、媒体格式、SSRC 值等内容
-  10:SIP   服务器将消息9转发给媒体流接收者，可扩展a 字段携带文件大小参数
- 11: 媒体流接收者收到200 OK 响应后，回复 ACK 消息，完成与 SIP 服务器的 Invite  会话建立过程
- 12:SIP  服务器将消息11转发给媒体服务器，完成与媒体服务器的 Invite  会话建立过程
- 13:   媒体流发送者在文件下载结束后发送会话内 Message  消息，通知 SIP  服务器回放已结束，消息体格式应符合 A.2.5.4  媒体通知的要求
-  14:SIP  服务器收到消息17后转发给媒体流接收者
- 15:媒体流接收者收到消息18后回复200 OK 响应，进行链路断开过程
- 16:SIP  服务器将消息19转发给媒体流发送者
- 17:媒体流接收者向 SIP 服务器发送 BYE 消息，断开消息1、10、11建立的同媒体流接收者的Invite  会话
- 18:SIP   服务器收到 BYE 消息后回复200 OK  响应，会话断开
- 19:SIP  服务器收到 BYE  消息后向媒体服务器发送 BYE  消息，断开消息8、9、12 建立的同媒体服务器的 Invite  会话
- 20:媒体服务器收到 BYE 消息后回复200 OK 响应，会话断开
- 21:SIP  服务器向媒体服务器发送 BYE  消息，断开消息2、3、6建立的同媒体服务器的 Invite会话
- 22:媒体服务器收到 BYE  消息后回复200 OK  响应，会话断开
- 23:SIP   服务器向媒体流发送者发送 BYE  消息，断开消息4、5、7建立的同媒体流发送者的Invite  会话
- 24:媒体流发送者收到 BYE  消息后回复200 OK  响应，会话断开
- 25:SIP服务器向媒体服务器发送BYE消息，断开消息2、3、6建立的同媒体服务器的Invite会话
- 26:媒体服务器收到 BYE消息后回复200OK 响应,会话断开
- 27:SIP服务器向媒体流发送者发送 BYE 消息,断开消息4、5、7建立的同媒体流发送者的 Invite会话
- 28:媒体流发送者收到 BYE消息后回复200OK 响应，会话断开

### 语音广播

​		语音广播功能实现，用户通过语音输入设备，向前端语音输出设备的语音广播。

- 语音流发送者：语音输入设备，联网系统，SIP服务器
- 语音流接收者：语音输出设备，联网系统

![sip监控域是什么 监控区域什么意思_服务器_18](https://s2.51cto.com/images/blog/202403/20192526_65fac7a6395b056567.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=/format,webp/resize,m_fixed,w_1184)

命令流程描述如下:

a) 1:SIP服务器向语音流接收者发送语音广播通知消息,消息中通过 To头域标明作为目的地址 的语音流接收者ID,消息采用 Message方法携带。

b) 2:语音流接收者收到语音广播通知消息后,向SIP服务器发送200OK 响应。

c) 3:语音流接收者向SIP服务器发送语音广播应答消息,消息中通过 To头域标明作为目的地 址的SIP服务器ID,消息采用 Message方法携带。

d) 4:SIP服务器收到语音广播应答消息后,向语音流接收者发送200OK 响应。

e) 5:语音流接收者向SIP服务器发送Invite消息,消息中通过 To头域标明作为目的地址的语音 流发送者ID,消息头域中携带Subject字段,表明请求的语音流发送者ID、发送方媒体流序列 号、语音流接收者ID、接收方媒体流序列号等参数,SDP消息体中s字段为“Play”代表实时点 播,m 字段中媒体参数标识为“audio”表示请求语音媒体流。

f) 6:SIP服务器收到Invite请求后,通过三方呼叫控制建立媒体服务器和语音流发送者之间的 媒体连接。向媒体服务器发送Invite消息,此消息不携带SDP消息体。

g) 7:媒体服务器收到SIP服务器的Invite请求后,回复200OK 响应,携带SDP消息体,消息体 中描述了媒体服务器接收媒体流的IP、端口、媒体格式等内容。

h) 8:SIP服务器收到媒体服务器返回的200OK 响应后,向语音流发送者发送Invite请求,消息 中通过 To头域标明作为目的地址的语音流发送者ID,消息头域中携带 Subject字段,表明请 求的语音流发送者ID、发送方媒体流序列号、语音流接收者ID、接收方媒体流序列号等参数, 请求中携带消息7中媒体服务器回复的200OK 响应消息体,s字段为“Play”代表实时点播, m 字段中媒体参数标识为“audio”表示请求语音媒体流,增加y字段描述SSRC值,f字段描述 媒体参数。

i) 9:语音流发送者收到SIP服务器的Invite请求后,回复200OK 响应,携带SDP消息体,消息 体中描述了媒体流发送者发送媒体流的IP、端口、媒体格式、SSRC 字段等内容,s字段为 “Play”代表实时点播,m 字段中媒体参数标识为“audio”表示请求语音媒体流。

j) 10:SIP服务器收到语音流发送者返回的200OK 响应后,向媒体服务器发送 ACK 请求,请求 中携带消息9中语音流发送者回复的200OK 响应消息体,完成与媒体服务器的Invite会话 建立过程。

k) 11:SIP服务器收到语音流发送者返回的200OK 响应后,向语音流发送者发送 ACK 请求,请 求中不携带消息体,完成与语音流发送者的Invite会话建立过程。

l) 12:完成三方呼叫控制后,SIP服务器通过 B2BUA 代理方式建立语音流接收者和媒体服务器 之间的媒体连接。在消息5中增加SSRC值,转发给媒体服务器。

m)13:媒体服务器收到Invite请求,回复200OK 响应,携带SDP消息体,消息体中描述了媒体服 务器发送媒体流的IP、端口、媒体格式、SSRC值等内容,s字段为“Play”代表实时点播,m 字段 中媒体参数标识为“audio”表示请求语音媒体流。

n) 14:SIP服务器将消息13转发给语音流接收者。

o) 15:语音流接收者收到200OK 响应后,回复 ACK 消息,完成与SIP服务器的Invite会话建立 过程。

p) 16:SIP服务器将消息15转发给媒体服务器,完成与媒体服务器的Invite会话建立过程。

q) 17:SIP服务器向语音流接收者发送 BYE消息,断开消息5、14、15建立的Invite会话。

r) 18:语音流接收者收到 BYE消息后回复200OK 响应,会话断开。

s) 19:SIP服务器向媒体服务器发送 BYE 消息,断开消息 12、13、16 建立的同媒体服务器的 Invite会话。

t) 20:媒体服务器收到 BYE消息后回复200OK 响应,会话断开。

u) 21:SIP服务器向媒体服务器发送 BYE消息,断开消息6、7、10建立的同媒体服务器的Invite 会话。

v) 22:媒体服务器收到 BYE消息后回复200OK 响应,会话断开。

w)23:SIP服务器向语音流发送者发送 BYE 消息,断开消息8、9、11建立的同语音流发送者的 Invite会话。

x) 24:语音流发送者收到 BYE消息后回复200OK 响应,会话断开。



### 语音对讲

​		语音对讲功能实现中心用户与前端用户之间的一对一语音对讲功能。 

​		语音对讲功能由下述两个独立的流程组合实现:

- 通过实时视音频点播功能，中心用户获得前端设备的实时视音频媒体流
- 通过语音广播功能，中心用户向前端对讲设备发送实时音频媒体流
  - 语音流的封装格式见C.2.4音频流的 RTP封装定义



## MANSCDP

​		联网系统控制描述协议。

- 请求命令
  - `Control`，一个控制动作
  - `Query`，一个查询动作
  - `Notify`，一个通知动作
- 应答命令
  - `Response`，表示一个请求动作的应答



## MANSRTSP

​		联网系统实时流协议



## 平台检测

​		针对国标28181的权威检测机构有公安一所（北京）和公安三所（上海），平台全项检测项目包括：上联、下联、IPC接入、NVR接入、解码器接入等内容。

​		具体过程如下：

1．受检单位向检测中心提出检验申请，填写型式检验申请表及产品委托检验协议。

2．检测中心对受检单位提交的资料进行审核并确定检测费。

3．受检单位缴纳检测费后，中心在5个工作日内安排现场抽（封）样或受检单位将产品按母体数要求送检测中心抽（封）样。

4．抽（封）样工作完成后，由综合部负责将任务下达到各检验部。

5．检验员对受试样品按照相关标准进行检验。检验完成后，检验员编制检验报告，经各检验部审核及中心负责人批准后，盖章并即日起生效。

6．检验报告一式两份，检测中心、受检单位各持一份（原件），可另行交费增加检测报告份数。

7．检验周期一般为20天，若受检单位因业务需要，可向检测中心申请加急业务。