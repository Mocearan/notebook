# 计算机系统

---



## 计算机系统组成

​		计算机系统由软件、硬件构成。

![image-20220216200718212](https://gitee.com/masstsing/picgo-picserver/raw/master/image-20220216200718212.png)

- 裸机

  计算机硬件， 包括晶体管、电子管、磁盘、内存条等电子设备。

- 内核

  操作系统内核

-  shell

  操作系统内核与用户的交互界面

- 系统软件

  - 语言处理程序	
  - 软件工具
  - DBMS

- 应用程序 



## 计算机硬件

​		![image-20220216204151154](https://gitee.com/masstsing/picgo-picserver/raw/master/image-20220216204151154.png)

### 总线

​		在计算机各硬件组件间传递各类数据的一组电子管道称为总线。

#### 片内总线

​		CPU内部的总线

#### 系统总线

- 数据总线

  通过数据总线，实现内存数据和CPU数据寄存器之间的数据交互

- 地址总线

  CPU通过地址总线寻址内存块

- 控制总线

  CPU通过控制总线向内存控制器发起一个指令，如读，时序等

#### 外部总线

​		CPU与各类外设交互的总线



### I/O设备

​		I/O设备是系统与用户进行交互的通道设备

- 输入设备
  - 键盘
  - 鼠标
  - 磁盘
- 输出设备
  - 显示器
  - 磁盘

> 输入输出是相对于内存来说的

### 内存

​		内存是CPU的数据缓存设备，用来存放进程以及进程要处理的数据。

​		磁盘中的数据要加载到内存才能被CPU操作。

### 中央处理器CPU

​		CPU主要由运算器、控制器、寄存器、程序计数器、高速缓存（三级缓存） 构成。

- 取指：从内存中加载CPU操作指令
- 译码：解译指令
- 执行：通过运算的算术逻辑单元进行指令运算
- 写回：
- 跳转：



## 计算机软件

### 操作系统

​		管理计算机系统中的硬件资源，调度软件资源的软件，控制计算机工作流程，方便用户使用。

- 文件管理
- 处理器管理
- 内存管理
- 设备管理
- 作业管理

#### 内核模块

- 进程调度
- 内存管理
- 虚拟文件系统VFS
- 网络接口
- 进程间通信

#### 抽象调度

操作系统通过三个基本的抽象调度，来实现对硬件资源的管理，实现硬件资源的合理使用并且提供一致的使用机制。

- 文件：对I/O设备的抽象表示
- 虚拟存储期：对主存和磁盘I/O设备的抽象表示
- 进程：对处理器、主存和I/O设备的抽象表示

##### 进程

进程时操作系统对正在运行的程序的一种抽象，一个系统可以运行多个进程，而每个进程都像在独占的使用系统硬件。

###### 进程上下文切换

进程使用系统调用时进入内核模式，执行用户代码时进入用户模式。两种模式切换时，进行上下文切换。 

![image-20220216210059778](https://gitee.com/masstsing/picgo-picserver/raw/master/image-20220216210059778.png)

##### 虚拟存储器

虚拟存储器为每个进程提供独立的，一致的存储空间，拥有独立的地址编排。

将内存看做磁盘地址空间的高速缓存。保护每个进程的地址空间不被其他进程操作。

![image-20220216211159383](https://gitee.com/masstsing/picgo-picserver/raw/master/image-20220216211159383.png)

> 最后一块，是异常向量表，进程初始化时进行异常初始化。上下文切换时的状态保存。
>
> 程序加载时，保存到代码段和`.data`，其中已经初始化的全局变量加载进`.data`
>
> 未初始化的全局变量加载进`.bss`，也称为零初始化段
>
> 堆数据由低地址向高地址增长
>
> 共享存储器的映射区，是保存共享库的符号链接的区域
>
> 栈数据由高地址向低地址增长



##### 文件

文件是一系列的字节序列。

###### 虚拟文件系统

虚拟文件系统是内核实现的一种架构，为用户空间提供统一的文件操作接口，即文件系统调用。它在内核内部为不同的真实文件系统提供一致的抽象接口。

![image-20220216212434227](https://gitee.com/masstsing/picgo-picserver/raw/master/image-20220216212434227.png)























