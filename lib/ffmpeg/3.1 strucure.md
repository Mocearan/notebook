# structure

​	 重要数据结构

---

![img](https://raw.githubusercontent.com/Mocearan/picgo-server/main/20130914204051125)

## 协议层

​		主要存储视音频使用的协议的类型以及状态。

- `AVIOContext`
- `URLContext`
- `URLProtocol ` 

### `URLProtocol`

- 每种协议都对应一个 URLProtocol 结构。
- FFMPEG 中文件也被当做一种存取协议



## 封装格式层

- `AVFormatContext`
- `AVInputFormat/ AVOutputFormat`

###  `AVFormatContext`

​		`AVFormatContext `是一个贯穿全局的数据结构。主要存储视音频封装格式中包含的信息。

### `AVInputFormat / AVOutputFormat`

​		同一时间只能存在一个。

## 编解码层

- `AVStream`
- `AVCodecContext`
- `AVCodec`

### `AVStream`

​		`AVStream`是一个贯穿全局的数据结构。保存数据流相关的编解码器、数据段信息。以及流概念本身的必要信息。

- 每个 AVStream 存储一个视频/音频流的相关数据；
- 每个`AVStream `对应一个 `AVCodecContext`，存储该视频/音频流使用解码方式的相关数据；

### `AVCodecContext`

- 每个 `AVCodecContext `中对应一个 `AVCodec`，包含该视频/音频对应的解码器；



### `AVCodec`

- 每种解码器都对应一个 `AVCodec `结构。



## 数据层

- `AVPacket`：解码前数据
- `AVFrame`：解码后数据

